---
title: Welcome to è©æå¤§ä»™çš„ç›˜ä¸æ´ - my page

---




          
Markdownè¯­æ³•æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒæ‰€æœ‰emojiï¼Œä½†ä½ å¯ä»¥é€šè¿‡è¾“å…¥æ ‡å‡†çš„emojiçŸ­ä»£ç ï¼ˆå¦‚`:smile:`ï¼‰æˆ–ç›´æ¥å¤åˆ¶ç²˜è´´Unicodeè¡¨æƒ…ç¬¦å·æ¥åœ¨å¤§å¤šæ•°æ”¯æŒçš„å¹³å°ï¼ˆå¦‚GitHubã€Giteeã€Typoraç­‰ï¼‰ä¸­æ˜¾ç¤ºemojiã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„Markdownå¯ç”¨emojiåŠå…¶çŸ­ä»£ç å’Œæ•ˆæœç¤ºä¾‹ï¼š

| çŸ­ä»£ç          | æ˜¾ç¤ºæ•ˆæœ | çŸ­ä»£ç          | æ˜¾ç¤ºæ•ˆæœ | çŸ­ä»£ç          | æ˜¾ç¤ºæ•ˆæœ |
| -------------- | -------- | -------------- | -------- | -------------- | -------- |
| `:smile:`      | ğŸ˜„       | `:laughing:`   | ğŸ˜†       | `:blush:`      | ğŸ˜Š       |
| `:heart:`      | â¤ï¸       | `:star:`       | â­        | `:fire:`       | ğŸ”¥       |
| `:thumbsup:`   | ğŸ‘       | `:thumbsdown:` | ğŸ‘       | `:clap:`       | ğŸ‘       |
| `:rocket:`     | ğŸš€       | `:tada:`       | ğŸ‰       | `:100:`        | ğŸ’¯       |
| `:eyes:`       | ğŸ‘€       | `:sunglasses:` | ğŸ˜       | `:thinking:`   | ğŸ¤”       |
| `:wave:`       | ğŸ‘‹       | `:pray:`       | ğŸ™       | `:muscle:`     | ğŸ’ª       |
| `:see_no_evil:`| ğŸ™ˆ       | `:checkered_flag:` | ğŸ   | `:bug:`        | ğŸ›       |

ä½ å¯ä»¥ç›´æ¥åœ¨Markdownæ–‡æ¡£ä¸­è¾“å…¥è¿™äº›çŸ­ä»£ç ï¼ˆå¦‚`:smile:`ï¼‰ï¼Œæˆ–è€…ç›´æ¥å¤åˆ¶ç²˜è´´emojiç¬¦å·ï¼ˆå¦‚ğŸ˜„ï¼‰ã€‚ä¸åŒå¹³å°å¯¹emojiçŸ­ä»£ç çš„æ”¯æŒç¨‹åº¦ä¸åŒï¼ŒGitHub/Giteeç­‰å¹³å°æ”¯æŒè¾ƒå¥½ï¼Œéƒ¨åˆ†æœ¬åœ°Markdownç¼–è¾‘å™¨å¯èƒ½åªæ”¯æŒç›´æ¥ç²˜è´´emojiç¬¦å·ã€‚

å¦‚æœéœ€è¦æ›´å…¨çš„emojiåˆ—è¡¨ï¼Œå¯ä»¥å‚è€ƒ[Emoji Cheat Sheet](https://www.webfx.com/tools/emoji-cheat-sheet/) æˆ– [Unicode Emoji List](https://unicode.org/emoji/charts/full-emoji-list.html)ã€‚

        




# AI-RAGæ­å»ºæ–¹æ³•åŠæµç¨‹



## ä¸€ã€å‚è€ƒæ–‡ç« 

| åºå·  | èµ„æ–™åç§°åŠé“¾æ¥                                                                                                                        | å†…å®¹æ¦‚è¦          | å‚è€ƒæŒ‡æ•°                                                   |
| --- | ------------------------------------------------------------------------------------------------------------------------------ | ------------- | ------------------------------------------------------ |
| 1   | [N8N+æ•°æ®çˆ¬å–å·¥ä½œæµï¼Œæ”¶é›†æ•°æ®é›†æœ¬åœ°æ­å»ºRAGçŸ¥è¯†åº“ï¼](https://www.toutiao.com/video/7493093048172216884/?log_from=11dd408b22442_1745076546106 "ç½‘ç»œè§†é¢‘") | éå¸¸å¥½çš„æ­å»ºæµç¨‹      | [â˜…â˜…â˜…â˜…â˜…](video/N8N+æ•°æ®çˆ¬å–å·¥ä½œæµï¼Œæ”¶é›†æ•°æ®é›†æœ¬åœ°æ­å»ºRAGçŸ¥è¯†åº“ï¼.mp4 "æœ¬åœ°è§†é¢‘") |
| 2   | [ç¤ºä¾‹èµ„æ–™2](https://example2.com)                                                                                                  | è¿™æ˜¯ç¤ºä¾‹èµ„æ–™2çš„æ¦‚è¦å†…å®¹ã€‚ | â˜…â˜…â˜…â˜…â˜†                                                  |
| 3   | [ç¤ºä¾‹èµ„æ–™3](https://example3.com)                                                                                                  | è¿™æ˜¯ç¤ºä¾‹èµ„æ–™3çš„æ¦‚è¦å†…å®¹ã€‚ | â˜…â˜…â˜†â˜†â˜†                                                  |
| 4   | [ç¤ºä¾‹èµ„æ–™4](https://example4.com)                                                                                                  | è¿™æ˜¯ç¤ºä¾‹èµ„æ–™4çš„æ¦‚è¦å†…å®¹ã€‚ | â˜…â˜…â˜…â˜…â˜…                                                  |
| 5   | [ç¤ºä¾‹èµ„æ–™5](https://example5.com)                                                                                                  | è¿™æ˜¯ç¤ºä¾‹èµ„æ–™5çš„æ¦‚è¦å†…å®¹ã€‚ | â˜…â˜…â˜…â˜†â˜†                                                  |

---

## äºŒã€ é‡ç‚¹æ–‡ç« å­¦ä¹ 

### 2.1.RAG æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ

[å‚è€ƒèµ„æ–™](https://www.toutiao.com/article/7478598179768861199/?log_from=6f5a4e8527956_1744272712176#:~:text=%E5%9C%A8%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0,%E6%8A%80%E6%9C%AF%E7%9A%84%E8%BA%AB%E5%BD%B1%E3%80%82 "RAG æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ")

> AI RAGï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸€ç§è®©äººå·¥æ™ºèƒ½æ›´èªæ˜ã€æ›´å‡†ç¡®å›ç­”é—®é¢˜çš„æŠ€æœ¯ã€‚
> 
> **â€œRAGâ€æ˜¯â€œRetrieval-Augmented Generationâ€çš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œæ£€ç´¢å¢å¼ºç”Ÿæˆâ€ã€‚**
> 
> é€šå¸¸æˆ‘ä»¬é—®äººå·¥æ™ºèƒ½ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯æ ¹æ®ä¹‹å‰å­¦ä¹ åˆ°çš„å¤§é‡çŸ¥è¯†æ¥å›ç­”ã€‚ä½†æœ‰æ—¶å€™è¿™äº›çŸ¥è¯†å¯èƒ½ä¸å¤Ÿå…¨é¢> æˆ–è€…ä¸å¤Ÿæ–°ï¼Œå›ç­”å°±å¯èƒ½ä¸å¤ªå‡†ç¡®æˆ–å®Œå–„ã€‚
> 
> è€ŒAI RAGå‘¢ï¼Œå°±åƒæ˜¯ç»™äººå·¥æ™ºèƒ½æ‰¾äº†ä¸€ä¸ªâ€œå°åŠ©æ‰‹â€ã€‚å½“ä½ æå‡ºé—®é¢˜åï¼Œå®ƒä¸ä»…ä¼šä¾é è‡ªå·±åŸæœ‰çš„çŸ¥è¯†å‚¨> å¤‡ï¼Œè¿˜ä¼šç«‹åˆ»å»ç›¸å…³çš„æ•°æ®åº“ã€æ–‡æ¡£æˆ–è€…ç½‘é¡µç­‰åœ°æ–¹å¿«é€Ÿæ£€ç´¢ï¼ŒæŠŠæœ€æ–°ã€æœ€å‡†ç¡®ã€æœ€ç›¸å…³çš„ä¿¡æ¯æ‰¾å‡ºæ¥ï¼Œ> ç„¶åç»“åˆè¿™äº›ä¿¡æ¯æ¥ç”Ÿæˆç­”æ¡ˆã€‚è¿™æ ·ä¸€æ¥ï¼Œäººå·¥æ™ºèƒ½ç»™å‡ºçš„å›ç­”å°±ä¼šæ›´åŠ å‡†ç¡®ã€è¯¦ç»†ï¼Œä¹Ÿæ›´èƒ½ç¬¦åˆä½ çš„éœ€> æ±‚å•¦ã€‚
> 
> æ¯”å¦‚è¯´ï¼Œä½ é—®äººå·¥æ™ºèƒ½å…³äºæœ€æ–°çš„ç§‘æŠ€å‘æ˜ï¼Œå®ƒé€šè¿‡RAGæŠ€æœ¯å°±å¯ä»¥é©¬ä¸Šä»æœ€æ–°çš„ç§‘æŠ€èµ„è®¯ç½‘ç«™ä¸Šæ‰¾åˆ°ç›¸> å…³å†…å®¹ï¼Œç„¶åå‘Šè¯‰ä½ å‡†ç¡®çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯åªå‡­å®ƒä¹‹å‰å­¦ä¹ åˆ°çš„ä¸€äº›æ—§çŸ¥è¯†æ¥å›ç­”ã€‚

![å‚è€ƒå›¾](https://p3-sign.toutiaoimg.com/tos-cn-i-6w9my0ksvp/c4f5045faf21438cad5bd4a7f70dddb4~tplv-tt-origin-web:gif.jpeg?_iz=58558&from=article.pc_detail&lk3s=953192f4&x-expires=1744877512&x-signature=r1rPBJVvIJNjM3wdGsEXTpAO9ZA%3D "å›¾ç‰‡")

### 2.2. LLM å­˜åœ¨çš„é—®é¢˜ä¸ RAG çš„è§£å†³æ–¹æ¡ˆ

ä»æ‚¨æä¾›çš„æ–‡æ¡£å†…å®¹æ¥çœ‹ï¼ŒLLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰å­˜åœ¨çš„ä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼š

#### 2.2.1 LLMå­˜åœ¨çš„é—®é¢˜

2.2.1.1. **å¹»è§‰é—®é¢˜ï¼ˆHallucinationï¼‰**

- è¿™æ˜¯æ–‡æ¡£ä¸­æ˜ç¡®æåˆ°çš„é—®é¢˜
- è¡¨ç°ä¸ºï¼šæ¨¡å‹å¯èƒ½ç”Ÿæˆé”™è¯¯ä¿¡æ¯æˆ–ä¸äº‹å®ä¸ç¬¦çš„å†…å®¹
- åŸå› ï¼š
  * è®­ç»ƒæ•°æ®ä¸­ç¼ºä¹è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
  * å¤„ç†é•¿æ–‡æœ¬æ—¶è®°å¿†èƒ½åŠ›æœ‰é™

2.2.1.2. **çŸ¥è¯†å±€é™æ€§**ï¼ˆæ–‡æ¡£å¼€å¤´éƒ¨åˆ†æåˆ°ï¼‰

- æ¨¡å‹ä¾èµ–è®­ç»ƒæ—¶çš„é™æ€çŸ¥è¯†åº“
- æ— æ³•è‡ªåŠ¨è·å–æœ€æ–°ä¿¡æ¯ï¼ˆå¦‚æœ€æ–°çš„ç§‘æŠ€å‘æ˜ï¼‰
- çŸ¥è¯†è¦†ç›–å¯èƒ½ä¸å…¨é¢

2.2.1.3. **å‡†ç¡®æ€§ä¸è¶³**ï¼ˆéšå«åœ¨RAGè§£å†³æ–¹æ¡ˆçš„æè¿°ä¸­ï¼‰

- ä»…ä¾é é¢„è®­ç»ƒçŸ¥è¯†æ—¶å›ç­”å¯èƒ½ä¸å¤Ÿå‡†ç¡®
- ç¼ºä¹å®æ—¶éªŒè¯æœºåˆ¶

#### 2.2.2 RAGè§£å†³æ–¹æ¡ˆ

RAGæŠ€æœ¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³LLMå­˜åœ¨çš„é—®é¢˜ï¼š

2.2.2.1 **å®æ—¶æ£€ç´¢æœºåˆ¶**

- åŠ¨æ€è·å–æœ€æ–°æ•°æ®ï¼ˆè§£å†³çŸ¥è¯†é™ˆæ—§é—®é¢˜ï¼‰
- æ”¯æŒå¤šæ•°æ®æºæ¥å…¥ï¼šæ•°æ®åº“/æ–‡æ¡£/API/ç½‘é¡µç­‰
- ç¤ºä¾‹ï¼šæŸ¥è¯¢æœ€æ–°ç§‘æŠ€å‘æ˜æ—¶ç›´æ¥ä»ç§‘æŠ€èµ„è®¯ç«™è·å–

2.2.2.2 **å¢å¼ºç”Ÿæˆè´¨é‡**

- ç»“åˆæ£€ç´¢ç»“æœä¸é¢„è®­ç»ƒçŸ¥è¯†ç”Ÿæˆå›ç­”
- é€šè¿‡ç›¸å…³æ€§æ’åºç­›é€‰æœ€ä¼˜å‚è€ƒå†…å®¹
- å‡å°‘å¹»è§‰ç°è±¡ï¼ˆæä¾›äº‹å®ä¾æ®ï¼‰

2.2.2.3 **æ¨¡å—åŒ–æ¶æ„**

- æ£€ç´¢å™¨(Retriever)ï¼šé«˜æ•ˆå‘é‡æœç´¢æŠ€æœ¯
- ç”Ÿæˆå™¨(Generator)ï¼šä¿æŒåŸæœ‰è¯­è¨€ç”Ÿæˆèƒ½åŠ›
- åè°ƒæ¨¡å—ï¼šæ™ºèƒ½èåˆæ£€ç´¢ä¸ç”Ÿæˆç»“æœ

2.2.2.4 **æŒç»­æ›´æ–°èƒ½åŠ›**

- æ— éœ€é‡æ–°è®­ç»ƒå³å¯æ›´æ–°çŸ¥è¯†åº“
- æ”¯æŒå¢é‡å¼æ•°æ®æ·»åŠ 
- å¯é…ç½®çš„åˆ·æ–°é¢‘ç‡ç­–ç•¥

éœ€è¦æˆ‘è¡¥å……å…¶ä»–LLMå¸¸è§é—®é¢˜ï¼ˆå¦‚è®¡ç®—æˆæœ¬é«˜ã€æ¨ç†é€Ÿåº¦æ…¢ç­‰ï¼‰å—ï¼Ÿè¿™äº›åœ¨æ‚¨çš„æ–‡æ¡£ä¸­å°šæœªæåŠã€‚

### 2.3. RAGæ ‡å‡†æ­å»ºæµç¨‹

#### 2.3.1 æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶    | åŠŸèƒ½è¯´æ˜   | å¸¸ç”¨æŠ€æœ¯æ–¹æ¡ˆ                         |
| ----- | ------ | ------------------------------ |
| æ–‡æ¡£åŠ è½½å™¨ | åŸå§‹æ•°æ®å¯¼å…¥ | PyPDF/Docx/HTMLè§£æå™¨             |
| æ–‡æœ¬åˆ†å‰²å™¨ | æ–‡æ¡£åˆ†å—å¤„ç† | RecursiveCharacterTextSplitter |
| å‘é‡æ•°æ®åº“ | å­˜å‚¨åµŒå…¥å‘é‡ | Pinecone/Weaviate/FAISS        |
| åµŒå…¥æ¨¡å‹  | æ–‡æœ¬å‘é‡åŒ–  | OpenAI/text-embedding-ada-002  |
| æ£€ç´¢å™¨   | ç›¸ä¼¼åº¦æœç´¢  | Cosine/ANNç®—æ³•                   |
| å¤§è¯­è¨€æ¨¡å‹ | ç­”æ¡ˆç”Ÿæˆ   | GPT-4/Llama-2                  |

### 3.2 æ ‡å‡†æµç¨‹

1. **æ•°æ®å‡†å¤‡é˜¶æ®µ**
   
   - æ–‡æ¡£é‡‡é›†ï¼ˆPDF/HTML/æ•°æ®åº“ç­‰ï¼‰
   - æ–‡æœ¬æ¸…æ´—ä¸æ ‡å‡†åŒ–
   - åˆ†å—å¤„ç†ï¼ˆé€šå¸¸512-1024 tokens/å—ï¼‰

2. **å‘é‡åŒ–é˜¶æ®µ**
   
   - é€‰æ‹©åµŒå…¥æ¨¡å‹
   - ç”Ÿæˆæ–‡æœ¬å‘é‡
   - å­˜å…¥å‘é‡æ•°æ®åº“

3. **æŸ¥è¯¢å¤„ç†é˜¶æ®µ**
   
   - ç”¨æˆ·é—®é¢˜å‘é‡åŒ–
   - æ£€ç´¢Top-Kç›¸å…³æ–‡æ¡£å—
   - ç”Ÿæˆå¢å¼ºæç¤ºè¯

4. **ç”Ÿæˆé˜¶æ®µ**
   
   - å°†æ£€ç´¢ç»“æœè¾“å…¥LLM
   - ç”Ÿæˆæœ€ç»ˆå›ç­”
   - å¯é€‰çš„åå¤„ç†æ­¥éª¤

### 3.3 æµç¨‹å›¾

<div style="clear: both;">
    <img src="Images\RAG001.png" style="float: left; width: 40%; margin-right: 20px;">

    ```mermaid
    graph TD
        A[åŸå§‹æ•°æ®] --> B[æ–‡æ¡£åŠ è½½]
        B --> C[æ–‡æœ¬åˆ†å‰²]
        C --> D[å‘é‡åµŒå…¥]
        D --> E[å‘é‡æ•°æ®åº“]
        F[ç”¨æˆ·é—®é¢˜] --> G[é—®é¢˜å‘é‡åŒ–]
        G --> H[å‘é‡æ£€ç´¢]
        E --> H
        H --> I[æ„å»ºæç¤ºè¯]
        I --> J[LLMç”Ÿæˆ]
        J --> K[è¿”å›ç­”æ¡ˆ]
    ```

</div>

<div style="clear: both;">

### 3.4 é‡ç‚¹æ­¥éª¤è§£é‡Š

#### 3.4.1. æ£€ç´¢

å½“ç”¨æˆ·è¾“å…¥æŸ¥è¯¢æ—¶ï¼Œé¦–å…ˆä¼šç»è¿‡åµŒå…¥æ¨¡å‹çš„å¤„ç†ã€‚åµŒå…¥æ¨¡å‹å°†ç”¨æˆ·æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œè¿™ä¸ªå‘é‡åŒ…å«äº†æŸ¥è¯¢çš„è¯­ä¹‰ä¿¡æ¯ã€‚ç„¶åï¼Œè¿™ä¸ªæŸ¥è¯¢å‘é‡ä¼šè¢«é€å…¥å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼æ€§æœç´¢ã€‚å‘é‡æ•°æ®åº“ä¼šè®¡ç®—æŸ¥è¯¢å‘é‡ä¸åº“ä¸­æ‰€æœ‰å‘é‡çš„ç›¸ä¼¼åº¦ï¼Œå¹¶æ ¹æ®ç›¸ä¼¼åº¦å¾—åˆ†å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œæœ€ç»ˆè¿”å›ä¸æŸ¥è¯¢å‘é‡æœ€ç›¸ä¼¼çš„è‹¥å¹²ä¸ªå‘é‡åŠå…¶å¯¹åº”çš„æ–‡æ¡£æˆ–æ•°æ®ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä¼ä¸šçŸ¥è¯†é—®ç­”ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·è¯¢é—® "å¦‚ä½•ç”³è¯·æŠ¥é”€ï¼Ÿ"ï¼ŒåµŒå…¥æ¨¡å‹å°†è¿™ä¸ªé—®é¢˜è½¬æ¢ä¸ºå‘é‡åï¼Œå‘é‡æ•°æ®åº“ä¼šåœ¨å­˜å‚¨çš„ä¼ä¸šæŠ¥é”€åˆ¶åº¦æ–‡æ¡£ã€æŠ¥é”€æµç¨‹æŒ‡å—ç­‰ç›¸å…³å‘é‡ä¸­è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µï¼Œå¦‚ "æŠ¥é”€ç”³è¯·éœ€è¦å¡«å†™æŠ¥é”€å•ï¼Œé™„ä¸Šç›¸å…³å‘ç¥¨ï¼Œå¹¶æäº¤ç»™éƒ¨é—¨é¢†å¯¼å®¡æ‰¹â€¦â€¦" ç­‰å†…å®¹

#### 3.4.2. å¢å¼º

æ£€ç´¢åˆ°ç›¸å…³ä¸Šä¸‹æ–‡åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¢å¼ºç¯èŠ‚ã€‚åœ¨è¿™ä¸ªç¯èŠ‚ä¸­ï¼Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¼šä¸ç”¨æˆ·æŸ¥è¯¢æ•´åˆåœ¨ä¸€èµ·ï¼Œå¡«å……åˆ°é¢„å…ˆè®¾è®¡å¥½çš„ prompt æ¨¡æ¿ä¸­ã€‚prompt æ¨¡æ¿å°±åƒæ˜¯ä¸€ä¸ª â€œé—®é¢˜å¼•å¯¼æ¡†æ¶â€ï¼Œå®ƒè§„å®šäº†è¾“å…¥ä¿¡æ¯çš„ç»„ç»‡æ–¹å¼å’Œæé—®æ–¹å¼ï¼Œä»¥å¼•å¯¼ç”Ÿæˆæ¨¡å—ç”Ÿæˆæ›´å¥½çš„å›ç­”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„ prompt æ¨¡æ¿å¯èƒ½æ˜¯ â€œç”¨æˆ·é—®é¢˜ï¼š{ç”¨æˆ·æŸ¥è¯¢}ï¼Œç›¸å…³ä¿¡æ¯ï¼š{æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡}ï¼Œè¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ã€‚â€ é€šè¿‡å°†ç”¨æˆ·æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡æŒ‰ç…§è¿™æ ·çš„æ¨¡æ¿è¿›è¡Œç»„åˆï¼Œç”Ÿæˆæ¨¡å—èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£é—®é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚ï¼Œä»è€Œç”Ÿæˆæ›´å‡†ç¡®ã€æ›´æœ‰é’ˆå¯¹æ€§çš„å›ç­”ã€‚

#### 3.4.3. ç”Ÿæˆ

å°†å¢å¼ºåçš„ prompt è¾“å…¥åˆ°ç”Ÿæˆæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯å¤§è¯­è¨€æ¨¡å‹ä¸­ã€‚å¤§è¯­è¨€æ¨¡å‹ä¼šå¯¹è¾“å…¥çš„ prompt è¿›è¡Œç†è§£å’Œåˆ†æï¼Œåˆ©ç”¨å…¶å†…éƒ¨çš„è¯­è¨€çŸ¥è¯†å’Œè¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œç»“åˆæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç”Ÿæˆæœ€ç»ˆçš„å›ç­”ã€‚åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå¤§è¯­è¨€æ¨¡å‹ä¼šæ ¹æ®é¢„è®­ç»ƒå­¦åˆ°çš„è¯­è¨€æ¨¡å¼å’Œé€»è¾‘ï¼Œé€æ­¥ç”Ÿæˆæ–‡æœ¬ã€‚ä¾‹å¦‚ï¼Œå½“ç”Ÿæˆæ¨¡å—æ¥æ”¶åˆ°å…³äº â€œå¦‚ä½•ç”³è¯·æŠ¥é”€ï¼Ÿâ€ çš„å¢å¼º prompt åï¼Œå®ƒä¼šæ ¹æ®å…¶ä¸­çš„ä¿¡æ¯ï¼Œç”Ÿæˆè¯¦ç»†çš„æŠ¥é”€ç”³è¯·æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ï¼Œå¦‚ â€œé¦–å…ˆï¼Œæ‚¨éœ€è¦å¡«å†™æŠ¥é”€å•ï¼Œç¡®ä¿å¡«å†™çš„ä¿¡æ¯å‡†ç¡®æ— è¯¯ã€‚ç„¶åï¼Œå°†ç›¸å…³å‘ç¥¨æ•´é½ç²˜è´´åœ¨æŠ¥é”€å•èƒŒé¢ã€‚å®Œæˆåï¼Œå°†æŠ¥é”€å•æäº¤ç»™æ‚¨çš„éƒ¨é—¨é¢†å¯¼è¿›è¡Œå®¡æ‰¹ã€‚å®¡æ‰¹é€šè¿‡åï¼Œå†æäº¤åˆ°è´¢åŠ¡éƒ¨é—¨è¿›è¡Œåç»­å¤„ç†â€¦â€¦â€ï¼Œæœ€ç»ˆå°†è¿™ä¸ªå›ç­”è¿”å›ç»™ç”¨æˆ·ã€‚

</div>
ä»¥ä¸‹æ˜¯å…³äºRAGç³»ç»Ÿç»„ä»¶å’Œæµç¨‹çš„è¯¦ç»†è¡¥å……è¯´æ˜ï¼ŒåŒ…æ‹¬å‘é‡æ•°æ®åº“é€‰å‹å’ŒPythonå®ç°ç¤ºä¾‹ï¼š

## 4. ç»„ä»¶æ·±åº¦è§£æ

### 4.1 å‘é‡æ•°æ®åº“é€‰å‹æ¯”è¾ƒ

| æ•°æ®åº“          | ä¼˜ç‚¹             | ç¼ºç‚¹          | é€‚ç”¨åœºæ™¯     |
| ------------ | -------------- | ----------- | -------- |
| **FAISS**    | é«˜æ€§èƒ½ï¼ŒFacebookå¼€æº | æ— æŒä¹…åŒ–åŠŸèƒ½      | ç ”ç©¶/å°è§„æ¨¡ç”Ÿäº§ |
| **Pinecone** | å…¨æ‰˜ç®¡æœåŠ¡ï¼Œè‡ªåŠ¨æ‰©å±•     | æ”¶è´¹ï¼Œæœ‰å­¦ä¹ æ›²çº¿    | ä¼ä¸šçº§åº”ç”¨    |
| **Weaviate** | æ”¯æŒæ··åˆæœç´¢ï¼Œå†…ç½®MLæ¨¡å‹  | éœ€è¦è‡ªæ‰˜ç®¡æˆ–è´­ä¹°äº‘æœåŠ¡ | å¤æ‚æ£€ç´¢éœ€æ±‚   |
| **Milvus**   | åˆ†å¸ƒå¼æ¶æ„ï¼Œé«˜å¯ç”¨      | è¿ç»´å¤æ‚        | è¶…å¤§è§„æ¨¡å‘é‡æ•°æ® |

### 4.2 å®Œæ•´Pythonå®ç°ç¤ºä¾‹

```python:e:\01-Trae-Dev\rag_demo.py
from langchain.document_loaders import WebBaseLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.embeddings import HuggingFaceEmbeddings
from langchain.vectorstores import Chroma
from langchain.chat_models import ChatOpenAI
from langchain.chains import RetrievalQA

# 1. æ–‡æ¡£åŠ è½½
loader = WebBaseLoader(["https://example.com/ai-news"])
docs = loader.load()

# 2. æ–‡æœ¬åˆ†å—
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=800,
    chunk_overlap=200
)
chunks = text_splitter.split_documents(docs)

# 3. å‘é‡åŒ–å­˜å‚¨
embeddings = HuggingFaceEmbeddings(model_name="BAAI/bge-small-zh")
vector_db = Chroma.from_documents(chunks, embeddings, persist_directory="./chroma_db")

# 4. æ£€ç´¢å¢å¼ºç”Ÿæˆ
retriever = vector_db.as_retriever(search_kwargs={"k": 3})
qa_chain = RetrievalQA.from_chain_type(
    llm=ChatOpenAI(model="gpt-3.5-turbo"),
    chain_type="stuff",
    retriever=retriever
)

result = qa_chain.run("AIé¢†åŸŸæœ€æ–°çªç ´æ˜¯ä»€ä¹ˆï¼Ÿ")
print(result)
```

## 5. æµç¨‹ä¼˜åŒ–æŠ€å·§

### 5.1 åˆ†å—ç­–ç•¥ä¼˜åŒ–

```python:e:\01-Trae-Dev\chunk_optimization.py
# åŸºäºå†…å®¹ç±»å‹çš„åˆ†å—ç­–ç•¥
def dynamic_chunking(text, content_type):
    if content_type == "legal":
        return RecursiveCharacterTextSplitter(
            chunk_size=400,
            chunk_overlap=100
        ).split_text(text)
    elif content_type == "news":
        return TokenTextSplitter(
            chunk_size=1024,
            chunk_overlap=256
        ).split_text(text)
```

### 5.2 æ··åˆæ£€ç´¢å®ç°

```python:e:\01-Trae-Dev\hybrid_search.py
from rank_bm25 import BM25Okapi
from sklearn.feature_extraction.text import CountVectorizer

# BM25å…³é”®è¯æ£€ç´¢
corpus = [doc.page_content for doc in chunks]
bm25 = BM25Okapi(corpus)

# æ··åˆæ£€ç´¢å‡½æ•°
def hybrid_search(query, k=5):
    # å…³é”®è¯æ£€ç´¢
    bm25_scores = bm25.get_scores(query)
    # å‘é‡æ£€ç´¢
    vector_results = vector_db.similarity_search(query, k=k*3)
    # ç»“æœèåˆ...
```

## å››ã€ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ç›‘æ§æŒ‡æ ‡**ï¼š
   
   - æ£€ç´¢å¬å›ç‡@K
   - å“åº”å»¶è¿ŸP99
   - ç”Ÿæˆç»“æœç›¸å…³æ€§è¯„åˆ†

2. **ç¼“å­˜ç­–ç•¥**ï¼š
   
   - é«˜é¢‘æŸ¥è¯¢ç»“æœç¼“å­˜
   - å‘é‡ç›¸ä¼¼åº¦é¢„è®¡ç®—

3. **æ›´æ–°æœºåˆ¶**ï¼š
   
   - å¢é‡ç´¢å¼•æ›´æ–°
   - å®šæ—¶å…¨é‡é‡å»º

4. **å®‰å…¨ä¸éšç§**ï¼š
   
   - æ•°æ®è„±æ•
   - è®¿é—®æ§åˆ¶
   - æ—¥å¿—ç›‘æ§

5. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   
   - åˆ†å¸ƒå¼éƒ¨ç½²
   - ç¡¬ä»¶åŠ é€Ÿ
   - ç¼“å­˜ä¼˜åŒ–

## äº”ã€Pythonå®ç°å‡†å¤‡

ä»¥ä¸‹æ˜¯Pythonå®ç°RAGç³»ç»Ÿçš„è¯¦ç»†å‡†å¤‡å·¥ä½œæ¸…å•ï¼Œæˆ‘å°†ä»æŠ€æœ¯æ ˆã€æ•°æ®å‡†å¤‡ã€ç¯å¢ƒé…ç½®å’Œæœ€ä½³å®è·µå››ä¸ªæ–¹é¢è¿›è¡Œè¯´æ˜ï¼š

### 7.1 æŠ€æœ¯æ ˆå‡†å¤‡

#### 7.1.1 æ ¸å¿ƒä¾èµ–åº“

```bash
# åŸºç¡€æ¡†æ¶
pip install langchain==0.1.0
# å‘é‡è®¡ç®—
pip install faiss-cpu sentence-transformers
# å‘é‡æ•°æ®åº“
pip install chromadb
# æ–‡æ¡£å¤„ç†
pip install pypdf python-docx bs4 unstructured
```

#### 7.1.2 å¯é€‰ç»„ä»¶

```bash
# æ··åˆæ£€ç´¢å¢å¼º
pip install rank_bm25 sklearn
# æœ¬åœ°æ¨¡å‹æ”¯æŒ
pip install transformers torch
# APIæœåŠ¡
pip install fastapi uvicorn
```

### 7.2 æ•°æ®å‡†å¤‡è§„èŒƒ

#### 7.2.1. **æ•°æ®é‡‡é›†è¦æ±‚**ï¼š

- æ ¼å¼æ”¯æŒï¼šPDF/Word/Excel/Markdown/HTML
- ç¼–ç æ ‡å‡†ï¼šUTF-8ä¼˜å…ˆ
- å…ƒæ•°æ®è¦æ±‚ï¼šåŒ…å«source/title/update_timeå­—æ®µ

#### 7.2.2. **é¢„å¤„ç†æµç¨‹**ï¼š

```python:e:\01-Trae-Dev\07-RAG\preprocess.py
from langchain.document_loaders import DirectoryLoader
from langchain.text_splitter import Language

# ä¸“ä¸šé¢†åŸŸç‰¹æ®Šå¤„ç†
def legal_doc_processing(text):
    # å¤„ç†æ³•å¾‹æ¡æ–‡ç‰¹æ®Šæ ¼å¼
    return clean_text

# å¤šè¯­è¨€æ”¯æŒ
SUPPORTED_LANGUAGES = ['zh', 'en', 'ja']
```

### 7.3 å¼€å‘ç¯å¢ƒé…ç½®

#### æ¨èIDEé…ç½®

1. VSCodeæ’ä»¶ï¼š
   
   - Python Extension Pack
   - Jupyter Notebookæ”¯æŒ
   - Dockeræ‰©å±•

2. è°ƒè¯•é…ç½®ï¼š
   
   ```json:e:\01-Trae-Dev\07-RAG\.vscode\launch.json
   {
    "configurations": [
        {
            "name": "è°ƒè¯•RAGæµç¨‹",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/pipeline.py"
        }
    ]
   }
   ```

### 5.1 ç”Ÿäº§çº§è§„èŒƒ

#### 5.1.1 æ€§èƒ½ä¼˜åŒ–

1. ç´¢å¼•ä¼˜åŒ–ï¼š
   
   - ä½¿ç”¨HNSWç®—æ³•åŠ é€Ÿæ£€ç´¢
   - é‡åŒ–å‹ç¼©å‘é‡ç»´åº¦
   - å®šæœŸé‡å»ºç´¢å¼•

2. ç¼“å­˜ç­–ç•¥ï¼š
   
   ```python:e:\01-Trae-Dev\07-RAG\cache.py
   from functools import lru_cache
   
   ```

@lru_cache(maxsize=1000)
def cached_embedding(text):
    return embed_model.encode(text)

```

#### 7.4.2 å®‰å…¨è§„èŒƒ
1. æ•°æ®è„±æ•æµç¨‹ï¼š
   - è‡ªåŠ¨è¯†åˆ«èº«ä»½è¯/æ‰‹æœºå·ç­‰æ•æ„Ÿä¿¡æ¯
   - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢æ•æ„Ÿå­—æ®µ

2. è®¿é—®æ§åˆ¶ï¼š
```python:e:\01-Trae-Dev\07-RAG\auth.py
from fastapi import Depends, HTTPException

async def verify_token(token: str):
    if not valid_token(token):
        raise HTTPException(status_code=403)
```

### 7.5 æµ‹è¯•éªŒè¯æ–¹æ¡ˆ

#### 7.5.1 è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶

```python:e:\01-Trae-Dev\07-RAG\tests/test_retrieval.py
import pytest

@pytest.mark.parametrize("query,expected", [
    ("æŠ¥é”€æµç¨‹", "å¡«å†™æŠ¥é”€å•"),
    ("è¯·å‡æ”¿ç­–", "3å¤©ä»¥ä¸Šéœ€å®¡æ‰¹")
])
def test_retrieval(query, expected):
    result = retriever(query)
    assert expected in result
```

#### 7.5.2 æ€§èƒ½åŸºå‡†

```python:e:\01-Trae-Dev\07-RAG\benchmark.py
def run_benchmark():
    # æµ‹è¯•100æ¬¡æŸ¥è¯¢å¹³å‡è€—æ—¶
    return timeit.timeit(query_func, number=100)
```

### 7.6 æ–‡æ¡£è§„èŒƒ

#### 7.6.1. APIæ–‡æ¡£ç”Ÿæˆï¼š

```python:e:\01-Trae-Dev\07-RAG\api.py
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class QueryRequest(BaseModel):
    question: str
    top_k: int = 3
```

#### 7.6.2. é¡¹ç›®æ–‡æ¡£ç»“æ„ï¼š

```
/docs
  â”œâ”€â”€ API-Reference.md
  â”œâ”€â”€ Deployment-Guide.md
  â””â”€â”€ Data-Specification.md
```

### 7.7 æŒç»­é›†æˆ

```yaml:e:\01-Trae-Dev\07-RAG\.github\workflows/ci.yml
name: RAG CI
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: pip install -r requirements.txt
      - run: pytest tests/
```

## å…­ã€å¤šæ¨¡æ€æ‰©å±•

ä»¥ä¸‹æ˜¯é’ˆå¯¹å¤šæ¨¡æ€(å›¾ç‰‡+æ–‡æœ¬)RAGç³»ç»Ÿçš„è¡¥å……å‡†å¤‡ç»†èŠ‚ï¼š

### 8.1 å¤šæ¨¡æ€å¤„ç†æŠ€æœ¯æ ˆ

```bash
# å›¾åƒå¤„ç†åŸºç¡€åº“
pip install pillow opencv-python
# å¤šæ¨¡æ€æ¨¡å‹
pip install transformers[torch] sentencepiece
# å‘é‡åŒ–å·¥å…·
pip install clip-anytorch
```

### 8.2 ä¸“ç”¨æ¨¡å‹é€‰å‹

| æ¨¡å‹åç§°     | ç±»å‹   | ç‰¹ç‚¹     | é€‚ç”¨åœºæ™¯   |
| -------- | ---- | ------ | ------ |
| CLIP     | å›¾æ–‡åŒ¹é… | å¼€æº/è½»é‡çº§ | é€šç”¨å›¾æ–‡æ£€ç´¢ |
| BLIP-2   | ç”Ÿæˆå¼  | å¤šä»»åŠ¡æ”¯æŒ  | å›¾ç‰‡æè¿°ç”Ÿæˆ |
| Florence | å¾®è½¯å‡ºå“ | å¤§è§„æ¨¡é¢„è®­ç»ƒ | ä¸“ä¸šé¢†åŸŸ   |

### 6.1 æ•°æ®å¤„ç†æµç¨‹

```python:e:\01-Trae-Dev\07-RAG\multimodal_processor.py
from PIL import Image
import torch
from transformers import Blip2Processor, Blip2ForConditionalGeneration

# åˆå§‹åŒ–å¤šæ¨¡æ€å¤„ç†å™¨
processor = Blip2Processor.from_pretrained("Salesforce/blip2-opt-2.7b")
model = Blip2ForConditionalGeneration.from_pretrained("Salesforce/blip2-opt-2.7b", torch_dtype=torch.float16)

def process_image(img_path):
    # æå–è§†è§‰ç‰¹å¾
    image = Image.open(img_path).convert('RGB')
    inputs = processor(images=image, return_tensors="pt").to("cuda", torch.float16)

    # ç”Ÿæˆå›¾ç‰‡æè¿°
    generated_ids = model.generate(**inputs)
    description = processor.batch_decode(generated_ids, skip_special_tokens=True)[0]

    return {
        "image_embedding": inputs.pixel_values,
        "text_description": description
    }
```

### 8.4 å­˜å‚¨æ–¹æ¡ˆä¼˜åŒ–

1. **æ··åˆç´¢å¼•ç»“æ„**ï¼š
   
   ```python:e:\01-Trae-Dev\07-RAG\multimodal_db.py
   from chromadb.utils.embedding_functions import MultiModalEmbeddingFunction
   
   ```

# åˆ›å»ºå¤šæ¨¡æ€é›†åˆ

multimodal_ef = MultiModalEmbeddingFunction(
    text_embedding_model="BAAI/bge-small",
    image_embedding_model="clip-vit-base-patch32"
)

collection = client.create_collection(
    name="multimodal",
    embedding_function=multimodal_ef
)

```

### 8.5 æŸ¥è¯¢å¤„ç†å¢å¼º
```python:e:\01-Trae-Dev\07-RAG\multimodal_query.py
def hybrid_retrieval(query, image=None, top_k=5):
    # æ–‡æœ¬æŸ¥è¯¢åˆ†æ”¯
    if isinstance(query, str):
        text_results = text_db.query(query_texts=[query], n_results=top_k)

    # å›¾åƒæŸ¥è¯¢åˆ†æ”¯ 
    if image is not None:
        img_vec = image_model.encode(image)
        image_results = image_db.query(query_embeddings=[img_vec], n_results=top_k)

    # ç»“æœèåˆç­–ç•¥
    return fuse_results(text_results, image_results)
```

### 8.6 é¢†åŸŸé€‚é…å»ºè®®

1. **åŒ»ç–—å½±åƒ**ï¼š
   
   - ä½¿ç”¨ä¸“ä¸šé¢†åŸŸæ¨¡å‹å¦‚CheXzero
   - DICOMæ ¼å¼ç‰¹æ®Šå¤„ç†
   - æ·»åŠ ç—…å˜éƒ¨ä½æ ‡è®°å…ƒæ•°æ®

2. **ç”µå•†åœºæ™¯**ï¼š
   
   - å•†å“å±æ€§ç»“æ„åŒ–å­˜å‚¨
   - æ”¯æŒä»¥å›¾æœå›¾
   - å¤šè§’åº¦å›¾ç‰‡ç´¢å¼•

3. **æ•™è‚²èµ„æ–™**ï¼š
   
   - å…¬å¼æˆªå›¾è½¬LaTeX
   
   - è®²ä¹‰å›¾æ–‡å…³è”
   
   - æ‰‹å†™ç¬”è®°è¯†åˆ«
     
     ```
     
     ```

éœ€è¦è¡¥å……å…·ä½“æŸä¸ªå‚ç›´é¢†åŸŸçš„å®ç°ç¤ºä¾‹å—ï¼Ÿä¾‹å¦‚å¯ä»¥æ¼”ç¤ºï¼š

1. åŒ»ç–—æŠ¥å‘Šä¸­çš„å½±åƒ+è¯Šæ–­æ–‡æœ¬è”åˆæ£€ç´¢
2. å•†å“å›¾ç‰‡ä¸è¯„è®ºçš„å…³è”åˆ†æ
3. å­¦æœ¯è®ºæ–‡å›¾è¡¨ä¸æ­£æ–‡çš„äº¤å‰å¼•ç”¨
